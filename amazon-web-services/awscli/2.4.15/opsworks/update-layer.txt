UPDATE-LAYER()                                                  UPDATE-LAYER()



NAME
       update-layer -

DESCRIPTION
       Updates a specified layer.
          Required  Permissions  : To use this action, an IAM user must have a
          Manage permissions level for the stack, or an attached  policy  that
          explicitly  grants permissions. For more information on user permis-
          sions, see Managing User Permissions .

       See also: AWS API Documentation

       See 'aws help' for descriptions of global parameters.

SYNOPSIS
            update-layer
          --layer-id <value>
          [--name <value>]
          [--shortname <value>]
          [--attributes <value>]
          [--cloud-watch-logs-configuration <value>]
          [--custom-instance-profile-arn <value>]
          [--custom-json <value>]
          [--custom-security-group-ids <value>]
          [--packages <value>]
          [--volume-configurations <value>]
          [--enable-auto-healing | --no-enable-auto-healing]
          [--auto-assign-elastic-ips | --no-auto-assign-elastic-ips]
          [--auto-assign-public-ips | --no-auto-assign-public-ips]
          [--custom-recipes <value>]
          [--install-updates-on-boot | --no-install-updates-on-boot]
          [--use-ebs-optimized-instances | --no-use-ebs-optimized-instances]
          [--lifecycle-event-configuration <value>]
          [--cli-input-json | --cli-input-yaml]
          [--generate-cli-skeleton <value>]

OPTIONS
       --layer-id (string)
          The layer ID.

       --name (string)
          The layer name, which is used by the console.

       --shortname (string)
          For custom layers only, use this parameter to  specify  the  layer's
          short  name,  which is used internally by AWS OpsWorks Stacks and by
          Chef. The short name is also used as  the  name  for  the  directory
          where  your  app  files  are installed. It can have a maximum of 200
          characters and must be in the following format: /A[a-z0-9-_.]+Z/.

          The built-in layers' short names are defined by AWS OpsWorks Stacks.
          For more information, see the Layer Reference

       --attributes (map)
          One  or  more  user-defined key/value pairs to be added to the stack
          attributes.

          key -> (string)

          value -> (string)

       Shorthand Syntax:

            KeyName1=string,KeyName2=string

          Where valid key names are:
            EcsClusterArn
            EnableHaproxyStats
            HaproxyStatsUrl
            HaproxyStatsUser
            HaproxyStatsPassword
            HaproxyHealthCheckUrl
            HaproxyHealthCheckMethod
            MysqlRootPassword
            MysqlRootPasswordUbiquitous
            GangliaUrl
            GangliaUser
            GangliaPassword
            MemcachedMemory
            NodejsVersion
            RubyVersion
            RubygemsVersion
            ManageBundler
            BundlerVersion
            RailsStack
            PassengerVersion
            Jvm
            JvmVersion
            JvmOptions
            JavaAppServer
            JavaAppServerVersion

       JSON Syntax:

          {"EcsClusterArn"|"EnableHaproxyStats"|"HaproxyStatsUrl"|"HaproxyStatsUser"|"HaproxyStatsPassword"|"HaproxyHealthCheckUrl"|"HaproxyHealthCheckMethod"|"MysqlRootPassword"|"MysqlRootPasswordUbiquitous"|"GangliaUrl"|"GangliaUser"|"GangliaPassword"|"MemcachedMemory"|"NodejsVersion"|"RubyVersion"|"RubygemsVersion"|"ManageBundler"|"BundlerVersion"|"RailsStack"|"PassengerVersion"|"Jvm"|"JvmVersion"|"JvmOptions"|"JavaAppServer"|"JavaAppServerVersion": "string"
            ...}

       --cloud-watch-logs-configuration (structure)
          Specifies CloudWatch Logs configuration options for the  layer.  For
          more information, see  CloudWatchLogsLogStream .

          Enabled -> (boolean)
              Whether CloudWatch Logs is enabled for a layer.

          LogStreams -> (list)
              A list of configuration options for CloudWatch Logs.

              (structure)
                 Describes  the  Amazon  CloudWatch  logs  configuration for a
                 layer. For detailed information about members  of  this  data
                 type, see the CloudWatch Logs Agent Reference .

                 LogGroupName -> (string)
                     Specifies  the destination log group. A log group is cre-
                     ated automatically if it doesn't already exist. Log group
                     names  can  be between 1 and 512 characters long. Allowed
                     characters include a-z, A-Z, 0-9, '_'  (underscore),  '-'
                     (hyphen), '/' (forward slash), and '.' (period).

                 DatetimeFormat -> (string)
                     Specifies  how the time stamp is extracted from logs. For
                     more information, see the CloudWatch Logs Agent Reference
                     .

                 TimeZone -> (string)
                     Specifies the time zone of log event time stamps.

                 File -> (string)
                     Specifies  log  files that you want to push to CloudWatch
                     Logs.
                        File can point to a specific file  or  multiple  files
                        (by  using  wild card characters such as /var/log/sys-
                        tem.log* ). Only the latest file is pushed  to  Cloud-
                        Watch Logs, based on file modification time. We recom-
                        mend that you use wild card characters  to  specify  a
                        series   of   files   of   the   same  type,  such  as
                        access_log.2014-06-01-01 , access_log.2014-06-01-02  ,
                        and so on by using a pattern like access_log.* . Don't
                        use a wildcard to match multiple file types,  such  as
                        access_log_80  and  access_log_443 . To specify multi-
                        ple, different file  types,  add  another  log  stream
                        entry to the configuration file, so that each log file
                        type is stored in a different log group.

                     Zipped files are not supported.

                 FileFingerprintLines -> (string)
                     Specifies the range of lines for identifying a file.  The
                     valid  values  are one number, or two dash-delimited num-
                     bers, such as '1', '2-5'. The default value is '1', mean-
                     ing  the first line is used to calculate the fingerprint.
                     Fingerprint lines are not sent to CloudWatch Logs  unless
                     all specified lines are available.

                 MultiLineStartPattern -> (string)
                     Specifies  the pattern for identifying the start of a log
                     message.

                 InitialPosition -> (string)
                     Specifies where to start to read data  (start_of_file  or
                     end_of_file).  The default is start_of_file. This setting
                     is only used if there is no state persisted for that  log
                     stream.

                 Encoding -> (string)
                     Specifies  the  encoding of the log file so that the file
                     can be read correctly. The default is utf_8  .  Encodings
                     supported by Python codecs.decode() can be used here.

                 BufferDuration -> (integer)
                     Specifies  the  time  duration  for  the  batching of log
                     events. The minimum value is 5000ms and default value  is
                     5000ms.

                 BatchCount -> (integer)
                     Specifies  the max number of log events in a batch, up to
                     10000. The default value is 1000.

                 BatchSize -> (integer)
                     Specifies the maximum size of log events in a  batch,  in
                     bytes,  up  to  1048576 bytes. The default value is 32768
                     bytes. This size is calculated as the sum  of  all  event
                     messages in UTF-8, plus 26 bytes for each log event.

       Shorthand Syntax:

          Enabled=boolean,LogStreams=[{LogGroupName=string,DatetimeFormat=string,TimeZone=string,File=string,FileFingerprintLines=string,MultiLineStartPattern=string,InitialPosition=string,Encoding=string,BufferDuration=integer,BatchCount=integer,BatchSize=integer},{LogGroupName=string,DatetimeFormat=string,TimeZone=string,File=string,FileFingerprintLines=string,MultiLineStartPattern=string,InitialPosition=string,Encoding=string,BufferDuration=integer,BatchCount=integer,BatchSize=integer}]

       JSON Syntax:

          {
            "Enabled": true|false,
            "LogStreams": [
              {
                "LogGroupName": "string",
                "DatetimeFormat": "string",
                "TimeZone": "LOCAL"|"UTC",
                "File": "string",
                "FileFingerprintLines": "string",
                "MultiLineStartPattern": "string",
                "InitialPosition": "start_of_file"|"end_of_file",
                "Encoding": "ascii"|"big5"|"big5hkscs"|"cp037"|"cp424"|"cp437"|"cp500"|"cp720"|"cp737"|"cp775"|"cp850"|"cp852"|"cp855"|"cp856"|"cp857"|"cp858"|"cp860"|"cp861"|"cp862"|"cp863"|"cp864"|"cp865"|"cp866"|"cp869"|"cp874"|"cp875"|"cp932"|"cp949"|"cp950"|"cp1006"|"cp1026"|"cp1140"|"cp1250"|"cp1251"|"cp1252"|"cp1253"|"cp1254"|"cp1255"|"cp1256"|"cp1257"|"cp1258"|"euc_jp"|"euc_jis_2004"|"euc_jisx0213"|"euc_kr"|"gb2312"|"gbk"|"gb18030"|"hz"|"iso2022_jp"|"iso2022_jp_1"|"iso2022_jp_2"|"iso2022_jp_2004"|"iso2022_jp_3"|"iso2022_jp_ext"|"iso2022_kr"|"latin_1"|"iso8859_2"|"iso8859_3"|"iso8859_4"|"iso8859_5"|"iso8859_6"|"iso8859_7"|"iso8859_8"|"iso8859_9"|"iso8859_10"|"iso8859_13"|"iso8859_14"|"iso8859_15"|"iso8859_16"|"johab"|"koi8_r"|"koi8_u"|"mac_cyrillic"|"mac_greek"|"mac_iceland"|"mac_latin2"|"mac_roman"|"mac_turkish"|"ptcp154"|"shift_jis"|"shift_jis_2004"|"shift_jisx0213"|"utf_32"|"utf_32_be"|"utf_32_le"|"utf_16"|"utf_16_be"|"utf_16_le"|"utf_7"|"utf_8"|"utf_8_sig",
                "BufferDuration": integer,
                "BatchCount": integer,
                "BatchSize": integer
              }
              ...
            ]
          }

       --custom-instance-profile-arn (string)
          The  ARN  of  an  IAM  profile to be used for all of the layer's EC2
          instances. For more information about IAM ARNs,  see  Using  Identi-
          fiers .

       --custom-json (string)
          A  JSON-formatted  string  containing custom stack configuration and
          deployment attributes to be installed on the layer's instances.  For
          more information, see Using Custom JSON .

       --custom-security-group-ids (list)
          An array containing the layer's custom security group IDs.

          (string)

       Syntax:

          "string" "string" ...

       --packages (list)
          An array of Package objects that describe the layer's packages.

          (string)

       Syntax:

          "string" "string" ...

       --volume-configurations (list)
          A  VolumeConfigurations object that describes the layer's Amazon EBS
          volumes.

          (structure)
              Describes an Amazon EBS volume configuration.

              MountPoint -> (string)
                 The volume mount point. For example "/dev/sdh".

              RaidLevel -> (integer)
                 The volume RAID level .

              NumberOfDisks -> (integer)
                 The number of disks in the volume.

              Size -> (integer)
                 The volume size.

              VolumeType -> (string)
                 The volume type. For more information, see Amazon EBS  Volume
                 Types .

                 o standard  -  Magnetic. Magnetic volumes must have a minimum
                   size of 1 GiB and a maximum size of 1024 GiB.

                 o io1 - Provisioned IOPS (SSD). PIOPS  volumes  must  have  a
                   minimum size of 4 GiB and a maximum size of 16384 GiB.

                 o gp2  -  General Purpose (SSD). General purpose volumes must
                   have a minimum size of 1 GiB and a maximum  size  of  16384
                   GiB.

                 o st1  - Throughput Optimized hard disk drive (HDD). Through-
                   put optimized HDD volumes must have a minimum size  of  500
                   GiB and a maximum size of 16384 GiB.

                 o sc1  -  Cold HDD. Cold HDD volumes must have a minimum size
                   of 500 GiB and a maximum size of 16384 GiB.

              Iops -> (integer)
                 For PIOPS volumes, the IOPS per disk.

              Encrypted -> (boolean)
                 Specifies whether an Amazon EBS volume is encrypted. For more
                 information, see Amazon EBS Encryption .

       Shorthand Syntax:

          MountPoint=string,RaidLevel=integer,NumberOfDisks=integer,Size=integer,VolumeType=string,Iops=integer,Encrypted=boolean ...

       JSON Syntax:

          [
            {
              "MountPoint": "string",
              "RaidLevel": integer,
              "NumberOfDisks": integer,
              "Size": integer,
              "VolumeType": "string",
              "Iops": integer,
              "Encrypted": true|false
            }
            ...
          ]

       --enable-auto-healing | --no-enable-auto-healing (boolean)
          Whether to disable auto healing for the layer.

       --auto-assign-elastic-ips | --no-auto-assign-elastic-ips (boolean)
          Whether to automatically assign an Elastic IP address to the layer's
          instances. For more information, see How to Edit a Layer .

       --auto-assign-public-ips | --no-auto-assign-public-ips (boolean)
          For stacks that are running  in  a  VPC,  whether  to  automatically
          assign a public IP address to the layer's instances. For more infor-
          mation, see How to Edit a Layer .

       --custom-recipes (structure)
          A  LayerCustomRecipes  object  that  specifies  the  layer's  custom
          recipes.

          Setup -> (list)
              An  array  of  custom  recipe  names to be run following a setup
              event.

              (string)

          Configure -> (list)
              An array of custom recipe names to be run following a  configure
              event.

              (string)

          Deploy -> (list)
              An  array  of  custom  recipe names to be run following a deploy
              event.

              (string)

          Undeploy -> (list)
              An array of custom recipe names to be run following  a  undeploy
              event.

              (string)

          Shutdown -> (list)
              An  array  of custom recipe names to be run following a shutdown
              event.

              (string)

       Shorthand Syntax:

          Setup=string,string,Configure=string,string,Deploy=string,string,Undeploy=string,string,Shutdown=string,string

       JSON Syntax:

          {
            "Setup": ["string", ...],
            "Configure": ["string", ...],
            "Deploy": ["string", ...],
            "Undeploy": ["string", ...],
            "Shutdown": ["string", ...]
          }

       --install-updates-on-boot | --no-install-updates-on-boot (boolean)
          Whether to install operating system and  package  updates  when  the
          instance  boots. The default value is true . To control when updates
          are installed, set this value to false . You must then  update  your
          instances   manually   by   using    CreateDeployment   to  run  the
          update_dependencies stack command or manually  running  yum  (Amazon
          Linux) or apt-get (Ubuntu) on the instances.

          NOTE:
              We  strongly  recommend  using  the  default  value of true , to
              ensure that your instances have the latest security updates.

       --use-ebs-optimized-instances    |     --no-use-ebs-optimized-instances
       (boolean)
          Whether to use Amazon EBS-optimized instances.

       --lifecycle-event-configuration (structure)
          Shutdown -> (structure)
              A  ShutdownEventConfiguration object that specifies the Shutdown
              event configuration.

              ExecutionTimeout -> (integer)
                 The time, in seconds, that  AWS  OpsWorks  Stacks  will  wait
                 after  triggering  a  Shutdown  event before shutting down an
                 instance.

              DelayUntilElbConnectionsDrained -> (boolean)
                 Whether to enable Elastic Load Balancing connection draining.
                 For more information, see Connection Draining

       Shorthand Syntax:

          Shutdown={ExecutionTimeout=integer,DelayUntilElbConnectionsDrained=boolean}

       JSON Syntax:

          {
            "Shutdown": {
              "ExecutionTimeout": integer,
              "DelayUntilElbConnectionsDrained": true|false
            }
          }

       --cli-input-json  |  --cli-input-yaml (string) Reads arguments from the
       JSON string provided. The JSON string follows the  format  provided  by
       --generate-cli-skeleton. If other arguments are provided on the command
       line, those values will override the JSON-provided values.  It  is  not
       possible to pass arbitrary binary values using a JSON-provided value as
       the string will be taken literally. This may  not  be  specified  along
       with --cli-input-yaml.

       --generate-cli-skeleton  (string)  Prints  a  JSON skeleton to standard
       output without sending an API request. If provided with no value or the
       value input, prints a sample input JSON that can be used as an argument
       for --cli-input-json. Similarly, if provided yaml-input it will print a
       sample  input  YAML that can be used with --cli-input-yaml. If provided
       with the value output, it validates the command inputs  and  returns  a
       sample output JSON for that command.

       See 'aws help' for descriptions of global parameters.

EXAMPLES
       To update a layer

       The following example updates a specified layer to use Amazon EBS-opti-
       mized instances.

          aws opsworks --region us-east-1 update-layer --layer-id 888c5645-09a5-4d0e-95a8-812ef1db76a4 --use-ebs-optimized-instances

       Output: None.

       More Information

       For more information, see Editing an OpsWorks Layer's Configuration  in
       the AWS OpsWorks User Guide.

OUTPUT
       None



                                                                UPDATE-LAYER()
