GET-SERVICE-LAST-ACCESSED-DETAILS()        GET-SERVICE-LAST-ACCESSED-DETAILS()



NAME
       get-service-last-accessed-details -

DESCRIPTION
       Retrieves  a  service  last  accessed report that was created using the
       GenerateServiceLastAccessedDetails operation. You  can  use  the  JobId
       parameter  in  GetServiceLastAccessedDetails  to retrieve the status of
       your report job. When the report is complete, you can retrieve the gen-
       erated  report.  The report includes a list of Amazon Web Services ser-
       vices that the resource (user, group,  role,  or  managed  policy)  can
       access.

       NOTE:
          Service  last  accessed  data  does  not use other policy types when
          determining whether a resource could access a service.  These  other
          policy  types include resource-based policies, access control lists,
          Organizations policies, IAM permissions boundaries, and  STS  assume
          role  policies.  It  only applies permissions policy logic. For more
          about the evaluation of policy types, see Evaluating policies in the
          IAM User Guide .

       For each service that the resource could access using permissions poli-
       cies, the operation  returns  details  about  the  most  recent  access
       attempt. If there was no attempt, the service is listed without details
       about the most recent attempt to access the service. If  the  operation
       fails,  the  GetServiceLastAccessedDetails operation returns the reason
       that it failed.

       The GetServiceLastAccessedDetails operation returns a list of services.
       This list includes the number of entities that have attempted to access
       the service and the date and time of the last attempt. It also  returns
       the ARN of the following entity, depending on the resource ARN that you
       used to generate the report:

       o User  Returns the user ARN that you used to generate the report

       o Group  Returns the ARN of the group member (user) that last attempted
         to access the service

       o Role  Returns the role ARN that you used to generate the report

       o Policy  Returns the ARN of the user or role that last used the policy
         to attempt to access the service

       By default, the list is sorted by service namespace.

       If you  specified  ACTION_LEVEL  granularity  when  you  generated  the
       report,  this  operation returns service and action last accessed data.
       This includes the most recent access attempt for  each  tracked  action
       within  a service. Otherwise, this operation returns only service data.

       For more information about service and action last accessed  data,  see
       Reducing  permissions  using service last accessed data in the IAM User
       Guide .

       See also: AWS API Documentation

       See 'aws help' for descriptions of global parameters.

SYNOPSIS
            get-service-last-accessed-details
          --job-id <value>
          [--max-items <value>]
          [--marker <value>]
          [--cli-input-json | --cli-input-yaml]
          [--generate-cli-skeleton <value>]

OPTIONS
       --job-id (string)
          The ID of the request generated by the  GenerateServiceLastAccessed-
          Details  operation.  The  JobId  returned  by GenerateServiceLastAc-
          cessedDetail must be used by the same role within a session,  or  by
          the same user when used to call GetServiceLastAccessedDetail .

       --max-items (integer)
          Use this only when paginating results to indicate the maximum number
          of items you want in the response. If additional items exist  beyond
          the  maximum you specify, the IsTruncated response element is true .

          If you do not include this parameter, the number of  items  defaults
          to  100.  Note  that IAM might return fewer results, even when there
          are more results available. In that case, the  IsTruncated  response
          element returns true , and Marker contains a value to include in the
          subsequent call that tells the service where to continue from.

       --marker (string)
          Use this parameter only when paginating results and only  after  you
          receive a response indicating that the results are truncated. Set it
          to the value of the Marker element in the response that you received
          to indicate where the next call should start.

       --cli-input-json  |  --cli-input-yaml (string) Reads arguments from the
       JSON string provided. The JSON string follows the  format  provided  by
       --generate-cli-skeleton. If other arguments are provided on the command
       line, those values will override the JSON-provided values.  It  is  not
       possible to pass arbitrary binary values using a JSON-provided value as
       the string will be taken literally. This may  not  be  specified  along
       with --cli-input-yaml.

       --generate-cli-skeleton  (string)  Prints  a  JSON skeleton to standard
       output without sending an API request. If provided with no value or the
       value input, prints a sample input JSON that can be used as an argument
       for --cli-input-json. Similarly, if provided yaml-input it will print a
       sample  input  YAML that can be used with --cli-input-yaml. If provided
       with the value output, it validates the command inputs  and  returns  a
       sample output JSON for that command.

       See 'aws help' for descriptions of global parameters.

EXAMPLES
       To retrieve a service access report

       The  following  get-service-last-accessed-details  example  retrieves a
       previously generated report that lists the  services  accessed  by  IAM
       entities.    To    generate    a    report,   use   the   generate-ser-
       vice-last-accessed-details command.

          aws iam get-service-last-accessed-details \
              --job-id 2eb6c2b8-7b4c-3xmp-3c13-03b72c8cdfdc

       Output:

          {
              "JobStatus": "COMPLETED",
              "JobCreationDate": "2019-10-01T03:50:35.929Z",
              "ServicesLastAccessed": [
                  ...
                  {
                      "ServiceName": "AWS Lambda",
                      "LastAuthenticated": "2019-09-30T23:02:00Z",
                      "ServiceNamespace": "lambda",
                      "LastAuthenticatedEntity": "arn:aws:iam::123456789012:user/admin",
                      "TotalAuthenticatedEntities": 6
                  },
              ]
          }

OUTPUT
       JobStatus -> (string)
          The status of the job.

       JobType -> (string)
          The type of job. Service jobs return  information  about  when  each
          service  was  last  accessed.  Action  jobs also include information
          about when tracked actions within the service were last accessed.

       JobCreationDate -> (timestamp)
          The date and time, in ISO 8601 date-time format ,  when  the  report
          job was created.

       ServicesLastAccessed -> (list)
          A  ServiceLastAccessed  object  that contains details about the most
          recent attempt to access the service.

          (structure)
              Contains details about the most recent  attempt  to  access  the
              service.

              This data type is used as a response element in the  GetService-
              LastAccessedDetails operation.

              ServiceName -> (string)
                 The name of the service in which access was attempted.

              LastAuthenticated -> (timestamp)
                 The date and time, in ISO 8601 date-time  format  ,  when  an
                 authenticated  entity  most  recently attempted to access the
                 service. Amazon Web Services does not report  unauthenticated
                 requests.

                 This field is null if no IAM entities attempted to access the
                 service within the reporting period .

              ServiceNamespace -> (string)
                 The namespace of the service in which access was attempted.

                 To learn the service namespace of  a  service,  see  Actions,
                 resources,  and  condition  keys for Amazon Web Services ser-
                 vices in the Service Authorization  Reference  .  Choose  the
                 name  of the service to view details for that service. In the
                 first paragraph, find the service prefix. For example,  (ser-
                 vice prefix: a4b) . For more information about service names-
                 paces, see Amazon Web Services Service Namespaces in the Ama-
                 zon Web Services General Reference .

              LastAuthenticatedEntity -> (string)
                 The  ARN of the authenticated entity (user or role) that last
                 attempted to access the service. Amazon Web Services does not
                 report unauthenticated requests.

                 This field is null if no IAM entities attempted to access the
                 service within the reporting period .

              LastAuthenticatedRegion -> (string)
                 The Region from which the authenticated entity (user or role)
                 last  attempted  to  access  the service. Amazon Web Services
                 does not report unauthenticated requests.

                 This field is null if no IAM entities attempted to access the
                 service within the reporting period .

              TotalAuthenticatedEntities -> (integer)
                 The  total number of authenticated principals (root user, IAM
                 users, or IAM roles) that have attempted to access  the  ser-
                 vice.

                 This  field  is null if no principals attempted to access the
                 service within the reporting period .

              TrackedActionsLastAccessed -> (list)
                 An object that contains details about the most recent attempt
                 to access a tracked action within the service.

                 This  field  is  null  if  there no tracked actions or if the
                 principal  did  not  use  the  tracked  actions  within   the
                 reporting  period . This field is also null if the report was
                 generated at the service level and not the action level.  For
                 more  information, see the Granularity field in  GenerateSer-
                 viceLastAccessedDetails .

                 (structure)
                     Contains details about the most recent attempt to  access
                     an action within the service.

                     This data type is used as a response element in the  Get-
                     ServiceLastAccessedDetails operation.

                     ActionName -> (string)
                        The name of the tracked action  to  which  access  was
                        attempted.  Tracked  actions  are  actions that report
                        activity to IAM.

                     LastAccessedEntity -> (string)
                        The Amazon Resource Name (ARN). ARNs are unique  iden-
                        tifiers for Amazon Web Services resources.

                        For more information about ARNs, go to Amazon Resource
                        Names (ARNs) in the Amazon Web Services General Refer-
                        ence .

                     LastAccessedTime -> (timestamp)
                        The date and time, in ISO 8601 date-time format , when
                        an authenticated entity  most  recently  attempted  to
                        access  the  tracked service. Amazon Web Services does
                        not report unauthenticated requests.

                        This field is null if no  IAM  entities  attempted  to
                        access the service within the reporting period .

                     LastAccessedRegion -> (string)
                        The  Region  from which the authenticated entity (user
                        or role) last attempted to access the tracked  action.
                        Amazon  Web  Services  does not report unauthenticated
                        requests.

                        This field is null if no  IAM  entities  attempted  to
                        access the service within the reporting period .

       JobCompletionDate -> (timestamp)
          The date and time, in ISO 8601 date-time format , when the generated
          report job was completed or failed.

          This field is null if the job is still in progress, as indicated  by
          a job status value of IN_PROGRESS .

       IsTruncated -> (boolean)
          A  flag  that  indicates  whether there are more items to return. If
          your results were truncated, you can make  a  subsequent  pagination
          request  using  the Marker request parameter to retrieve more items.
          Note that IAM might return fewer than the MaxItems number of results
          even  when  there  are more results available. We recommend that you
          check IsTruncated after every call to ensure that  you  receive  all
          your results.

       Marker -> (string)
          When  IsTruncated is true , this element is present and contains the
          value to use for the Marker parameter  in  a  subsequent  pagination
          request.

       Error -> (structure)
          An  object  that  contains  details  about  the reason the operation
          failed.

          Message -> (string)
              Detailed information about the reason that the operation failed.

          Code -> (string)
              The error code associated with the operation failure.



                                           GET-SERVICE-LAST-ACCESSED-DETAILS()
