CREATE-ASSOCIATION-BATCH()                          CREATE-ASSOCIATION-BATCH()



NAME
       create-association-batch -

DESCRIPTION
       Associates  the  specified Amazon Web Services Systems Manager document
       (SSM document) with the specified managed nodes or targets.

       When you associate a document with one or more managed nodes using  IDs
       or  tags, Amazon Web Services Systems Manager Agent (SSM Agent) running
       on the managed node processes the document and configures the  node  as
       specified.

       If  you  associate  a  document with a managed node that already has an
       associated document, the system  returns  the  AssociationAlreadyExists
       exception.

       See also: AWS API Documentation

       See 'aws help' for descriptions of global parameters.

SYNOPSIS
            create-association-batch
          --entries <value>
          [--cli-input-json | --cli-input-yaml]
          [--generate-cli-skeleton <value>]

OPTIONS
       --entries (list)
          One or more associations.

          (structure)
              Describes  the association of a Amazon Web Services Systems Man-
              ager document (SSM document) and a managed node.

              Name -> (string)
                 The name of the SSM document that contains the  configuration
                 information  for the managed node. You can specify Command or
                 Automation runbooks.

                 You can specify  Amazon  Web  Services-predefined  documents,
                 documents  you created, or a document that is shared with you
                 from another account.

                 For SSM documents that are shared with you from other  Amazon
                 Web Services accounts, you must specify the complete SSM doc-
                 ument ARN, in the following format:

                     ``
                     arn:aws:ssm:region :account-id :document/document-name ``

                 For example:
                     arn:aws:ssm:us-east-2:12345678912:document/My-Shared-Doc-
                     ument

                 For Amazon Web Services-predefined documents  and  SSM  docu-
                 ments  you  created in your account, you only need to specify
                 the document name.  For  example,  AWS-ApplyPatchBaseline  or
                 My-Document .

              InstanceId -> (string)
                 The managed node ID.

                 NOTE:
                     InstanceId has been deprecated. To specify a managed node
                     ID  for  an  association,  use  the  Targets   parameter.
                     Requests  that include the parameter InstanceID with Sys-
                     tems Manager documents (SSM documents)  that  use  schema
                     version  2.0  or later will fail. In addition, if you use
                     the parameter InstanceId , you can't use  the  parameters
                     AssociationName  ,  DocumentVersion , MaxErrors , MaxCon-
                     currency , OutputLocation , or  ScheduleExpression  .  To
                     use these parameters, you must use the Targets parameter.

              Parameters -> (map)
                 A description of the parameters for a document.

                 key -> (string)

                 value -> (list)
                     (string)

              AutomationTargetParameterName -> (string)
                 Specify the  target  for  the  association.  This  target  is
                 required  for associations that use an Automation runbook and
                 target resources by using  rate  controls.  Automation  is  a
                 capability of Amazon Web Services Systems Manager.

              DocumentVersion -> (string)
                 The document version.

              Targets -> (list)
                 The managed nodes targeted by the request.

                 (structure)
                     An  array  of  search criteria that targets managed nodes
                     using a key-value pair that you specify.

                     NOTE:
                        One or more targets must be specified for  maintenance
                        window  Run Command-type tasks. Depending on the task,
                        targets are optional for other maintenance window task
                        types  (Automation,  Lambda,  and Step Functions). For
                        more information about running tasks that don't  spec-
                        ify  targets, see Registering maintenance window tasks
                        without targets in the  Amazon  Web  Services  Systems
                        Manager User Guide .

                     Supported formats include the following.

                     o Key=InstanceIds,Val-
                       ues=<instance-id-1>,<instance-id-2>,<instance-id-3>

                     o Key=tag:<my-tag-key>,Val-
                       ues=<my-tag-value-1>,<my-tag-value-2>

                     o Key=tag-key,Values=<my-tag-key-1>,<my-tag-key-2>

                     o Run  Command  and  Maintenance  window  targets  only :
                       Key=resource-groups:Name,Values=<resource-group-name>

                     o Maintenance      window      targets       only       :
                       Key=resource-groups:ResourceTypeFilters,Val-
                       ues=<resource-type-1>,<resource-type-2>

                     o Automation  targets   only   :   Key=ResourceGroup;Val-
                       ues=<resource-group-name>

                     For example:

                     o Key=InstanceIds,Values=i-02573cafcfEXAM-
                       PLE,i-0471e04240EXAMPLE,i-07782c72faEXAMPLE

                     o Key=tag:CostCenter,Values=CostCenter1,CostCenter2,Cost-
                       Center3

                     o Key=tag-key,Values=Name,Instance-Type,CostCenter

                     o Run  Command  and  Maintenance  window  targets  only :
                       Key=resource-groups:Name,Values=ProductionResourceGroup
                       This  example  demonstrates how to target all resources
                       in the resource group ProductionResourceGroup  in  your
                       maintenance window.

                     o Maintenance       window       targets      only      :
                       Key=resource-groups:ResourceTypeFilters,Val-
                       ues=AWS::EC2::INSTANCE,AWS::EC2::VPC     This   example
                       demonstrates how to target only Amazon Elastic  Compute
                       Cloud  (Amazon  EC2) instances and VPCs in your mainte-
                       nance window.

                     o Automation  targets   only   :   Key=ResourceGroup,Val-
                       ues=MyResourceGroup

                     o State  Manager  association  targets only : Key=Instan-
                       ceIds,Values=*   This example demonstrates how to  tar-
                       get  all  managed  instances in the Amazon Web Services
                       Region where the association was created.

                     For more information about how to send commands that tar-
                     get   managed   nodes  using  Key,Value  parameters,  see
                     Targeting multiple instances in the Amazon  Web  Services
                     Systems Manager User Guide .

                     Key -> (string)
                        User-defined criteria for sending commands that target
                        managed nodes that meet the criteria.

                     Values -> (list)
                        User-defined criteria that maps to Key . For  example,
                        if  you  specified  tag:ServerRole , you could specify
                        value:WebServer to run a  command  on  instances  that
                        include EC2 tags of ServerRole,WebServer .

                        Depending on the type of target, the maximum number of
                        values for a key might be lower than the global  maxi-
                        mum of 50.

                        (string)

              ScheduleExpression -> (string)
                 A cron expression that specifies a schedule when the associa-
                 tion runs.

              OutputLocation -> (structure)
                 An S3 bucket where you want to  store  the  results  of  this
                 request.

                 S3Location -> (structure)
                     An  S3 bucket where you want to store the results of this
                     request.

                     OutputS3Region -> (string)
                        The Amazon Web Services Region of the S3 bucket.

                     OutputS3BucketName -> (string)
                        The name of the S3 bucket.

                     OutputS3KeyPrefix -> (string)
                        The S3 bucket subfolder.

              AssociationName -> (string)
                 Specify a descriptive name for the association.

              MaxErrors -> (string)
                 The number of errors that are allowed before the system stops
                 sending  requests  to  run the association on additional tar-
                 gets. You can specify either an absolute  number  of  errors,
                 for  example 10, or a percentage of the target set, for exam-
                 ple 10%. If you specify 3,  for  example,  the  system  stops
                 sending  requests  when  the fourth error is received. If you
                 specify 0, then the system stops sending requests  after  the
                 first error is returned. If you run an association on 50 man-
                 aged nodes and set MaxError to 10%,  then  the  system  stops
                 sending the request when the sixth error is received.

                 Executions  that are already running an association when Max-
                 Errors is reached are allowed to complete, but some of  these
                 executions may fail as well. If you need to ensure that there
                 won't be more than max-errors failed executions, set  MaxCon-
                 currency to 1 so that executions proceed one at a time.

              MaxConcurrency -> (string)
                 The  maximum number of targets allowed to run the association
                 at the same time. You can specify a number, for  example  10,
                 or  a  percentage  of  the  target  set, for example 10%. The
                 default value is 100%, which means all targets run the  asso-
                 ciation at the same time.

                 If  a new managed node starts and attempts to run an associa-
                 tion while Systems Manager is running MaxConcurrency associa-
                 tions,  the  association  is  allowed to run. During the next
                 association interval, the new managed node will  process  its
                 association within the limit specified for MaxConcurrency .

              ComplianceSeverity -> (string)
                 The severity level to assign to the association.

              SyncCompliance -> (string)
                 The mode for generating association compliance. You can spec-
                 ify AUTO or MANUAL . In AUTO mode, the system uses the status
                 of the association execution to determine the compliance sta-
                 tus. If the association execution runs successfully, then the
                 association  is  COMPLIANT  .  If  the  association execution
                 doesn't run successfully, the association is NON-COMPLIANT  .

                 In  MANUAL  mode,  you  must  specify  the AssociationId as a
                 parameter for the  PutComplianceItems API operation. In  this
                 case, compliance data isn't managed by State Manager, a capa-
                 bility of Amazon Web Services Systems Manager. It is  managed
                 by your direct call to the  PutComplianceItems API operation.

                 By default, all associations use AUTO mode.

              ApplyOnlyAtCronInterval -> (boolean)
                 By default, when you create a new  associations,  the  system
                 runs it immediately after it is created and then according to
                 the schedule you specified. Specify this option if you  don't
                 want  an  association to run immediately after you create it.
                 This parameter isn't supported for rate expressions.

              CalendarNames -> (list)
                 The names or Amazon Resource Names (ARNs) of the Change  Cal-
                 endar  type  documents your associations are gated under. The
                 associations only run when that Change Calendar is open.  For
                 more  information,  see  Amazon  Web Services Systems Manager
                 Change Calendar .

                 (string)

              TargetLocations -> (list)
                 Use this action to create an association in multiple  Regions
                 and multiple accounts.

                 (structure)
                     The combination of Amazon Web Services Regions and Amazon
                     Web Services accounts targeted by the current  Automation
                     execution.

                     Accounts -> (list)
                        The  Amazon Web Services accounts targeted by the cur-
                        rent Automation execution.

                        (string)

                     Regions -> (list)
                        The Amazon Web Services Regions targeted by  the  cur-
                        rent Automation execution.

                        (string)

                     TargetLocationMaxConcurrency -> (string)
                        The  maximum number of Amazon Web Services Regions and
                        Amazon Web Services accounts allowed to run the  Auto-
                        mation concurrently.

                     TargetLocationMaxErrors -> (string)
                        The maximum number of errors allowed before the system
                        stops queueing additional  Automation  executions  for
                        the currently running Automation.

                     ExecutionRoleName -> (string)
                        The  Automation  execution  role used by the currently
                        running Automation.  If  not  specified,  the  default
                        value  is AWS-SystemsManager-AutomationExecutionRole .

       JSON Syntax:

          [
            {
              "Name": "string",
              "InstanceId": "string",
              "Parameters": {"string": ["string", ...]
                ...},
              "AutomationTargetParameterName": "string",
              "DocumentVersion": "string",
              "Targets": [
                {
                  "Key": "string",
                  "Values": ["string", ...]
                }
                ...
              ],
              "ScheduleExpression": "string",
              "OutputLocation": {
                "S3Location": {
                  "OutputS3Region": "string",
                  "OutputS3BucketName": "string",
                  "OutputS3KeyPrefix": "string"
                }
              },
              "AssociationName": "string",
              "MaxErrors": "string",
              "MaxConcurrency": "string",
              "ComplianceSeverity": "CRITICAL"|"HIGH"|"MEDIUM"|"LOW"|"UNSPECIFIED",
              "SyncCompliance": "AUTO"|"MANUAL",
              "ApplyOnlyAtCronInterval": true|false,
              "CalendarNames": ["string", ...],
              "TargetLocations": [
                {
                  "Accounts": ["string", ...],
                  "Regions": ["string", ...],
                  "TargetLocationMaxConcurrency": "string",
                  "TargetLocationMaxErrors": "string",
                  "ExecutionRoleName": "string"
                }
                ...
              ]
            }
            ...
          ]

       --cli-input-json | --cli-input-yaml (string) Reads arguments  from  the
       JSON  string  provided.  The JSON string follows the format provided by
       --generate-cli-skeleton. If other arguments are provided on the command
       line,  those  values  will override the JSON-provided values. It is not
       possible to pass arbitrary binary values using a JSON-provided value as
       the  string  will  be  taken literally. This may not be specified along
       with --cli-input-yaml.

       --generate-cli-skeleton (string) Prints a  JSON  skeleton  to  standard
       output without sending an API request. If provided with no value or the
       value input, prints a sample input JSON that can be used as an argument
       for --cli-input-json. Similarly, if provided yaml-input it will print a
       sample input YAML that can be used with --cli-input-yaml.  If  provided
       with  the  value  output, it validates the command inputs and returns a
       sample output JSON for that command.

       See 'aws help' for descriptions of global parameters.

EXAMPLES
       To create multiple associations

       This  example  associates  a  configuration  document   with   multiple
       instances.  The  output  returns a list of successful and failed opera-
       tions, if applicable.

       Command:

          aws ssm create-association-batch --entries "Name=AWS-UpdateSSMAgent,InstanceId=i-1234567890abcdef0" "Name=AWS-UpdateSSMAgent,InstanceId=i-9876543210abcdef0"

       Output:

          {
            "Successful": [
                {
                    "Name": "AWS-UpdateSSMAgent",
                    "InstanceId": "i-1234567890abcdef0",
                    "AssociationVersion": "1",
                    "Date": 1550504725.007,
                    "LastUpdateAssociationDate": 1550504725.007,
                    "Status": {
                        "Date": 1550504725.007,
                        "Name": "Associated",
                        "Message": "Associated with AWS-UpdateSSMAgent"
                    },
                    "Overview": {
                        "Status": "Pending",
                        "DetailedStatus": "Creating"
                    },
                    "DocumentVersion": "$DEFAULT",
                    "AssociationId": "8dfe3659-4309-493a-8755-0123456789ab",
                    "Targets": [
                        {
                            "Key": "InstanceIds",
                            "Values": [
                                "i-1234567890abcdef0"
                            ]
                        }
                    ]
                },
                {
                    "Name": "AWS-UpdateSSMAgent",
                    "InstanceId": "i-9876543210abcdef0",
                    "AssociationVersion": "1",
                    "Date": 1550504725.057,
                    "LastUpdateAssociationDate": 1550504725.057,
                    "Status": {
                        "Date": 1550504725.057,
                        "Name": "Associated",
                        "Message": "Associated with AWS-UpdateSSMAgent"
                    },
                    "Overview": {
                        "Status": "Pending",
                        "DetailedStatus": "Creating"
                    },
                    "DocumentVersion": "$DEFAULT",
                    "AssociationId": "9c9f7f20-5154-4fed-a83e-0123456789ab",
                    "Targets": [
                        {
                            "Key": "InstanceIds",
                            "Values": [
                                "i-9876543210abcdef0"
                            ]
                        }
                    ]
                }
            ],
            "Failed": []
          }

OUTPUT
       Successful -> (list)
          Information about the associations that succeeded.

          (structure)
              Describes the parameters for a document.

              Name -> (string)
                 The name of the SSM document.

              InstanceId -> (string)
                 The managed node ID.

              AssociationVersion -> (string)
                 The association version.

              Date -> (timestamp)
                 The date when the association was made.

              LastUpdateAssociationDate -> (timestamp)
                 The date when the association was last updated.

              Status -> (structure)
                 The association status.

                 Date -> (timestamp)
                     The date when the status changed.

                 Name -> (string)
                     The status.

                 Message -> (string)
                     The reason for the status.

                 AdditionalInfo -> (string)
                     A user-defined string.

              Overview -> (structure)
                 Information about the association.

                 Status -> (string)
                     The status of the association. Status  can  be:  Pending,
                     Success, or Failed.

                 DetailedStatus -> (string)
                     A detailed status of the association.

                 AssociationStatusAggregatedCount -> (map)
                     Returns the number of targets for the association status.
                     For example, if you created an association with two  man-
                     aged  nodes,  and  one of them was successful, this would
                     return the count of managed nodes by status.

                     key -> (string)

                     value -> (integer)

              DocumentVersion -> (string)
                 The document version.

              AutomationTargetParameterName -> (string)
                 Choose the parameter that will  define  how  your  automation
                 will  branch  out.  This  target is required for associations
                 that use an Automation runbook and target resources by  using
                 rate  controls. Automation is a capability of Amazon Web Ser-
                 vices Systems Manager.

              Parameters -> (map)
                 A description of the parameters for a document.

                 key -> (string)

                 value -> (list)
                     (string)

              AssociationId -> (string)
                 The association ID.

              Targets -> (list)
                 The managed nodes targeted by the request.

                 (structure)
                     An array of search criteria that  targets  managed  nodes
                     using a key-value pair that you specify.

                     NOTE:
                        One  or more targets must be specified for maintenance
                        window Run Command-type tasks. Depending on the  task,
                        targets are optional for other maintenance window task
                        types (Automation, Lambda, and  Step  Functions).  For
                        more  information about running tasks that don't spec-
                        ify targets, see Registering maintenance window  tasks
                        without  targets  in  the  Amazon Web Services Systems
                        Manager User Guide .

                     Supported formats include the following.

                     o Key=InstanceIds,Val-
                       ues=<instance-id-1>,<instance-id-2>,<instance-id-3>

                     o Key=tag:<my-tag-key>,Val-
                       ues=<my-tag-value-1>,<my-tag-value-2>

                     o Key=tag-key,Values=<my-tag-key-1>,<my-tag-key-2>

                     o Run Command  and  Maintenance  window  targets  only  :
                       Key=resource-groups:Name,Values=<resource-group-name>

                     o Maintenance       window       targets      only      :
                       Key=resource-groups:ResourceTypeFilters,Val-
                       ues=<resource-type-1>,<resource-type-2>

                     o Automation   targets   only   :  Key=ResourceGroup;Val-
                       ues=<resource-group-name>

                     For example:

                     o Key=InstanceIds,Values=i-02573cafcfEXAM-
                       PLE,i-0471e04240EXAMPLE,i-07782c72faEXAMPLE

                     o Key=tag:CostCenter,Values=CostCenter1,CostCenter2,Cost-
                       Center3

                     o Key=tag-key,Values=Name,Instance-Type,CostCenter

                     o Run Command  and  Maintenance  window  targets  only  :
                       Key=resource-groups:Name,Values=ProductionResourceGroup
                       This example demonstrates how to target  all  resources
                       in  the  resource group ProductionResourceGroup in your
                       maintenance window.

                     o Maintenance      window      targets       only       :
                       Key=resource-groups:ResourceTypeFilters,Val-
                       ues=AWS::EC2::INSTANCE,AWS::EC2::VPC     This   example
                       demonstrates  how to target only Amazon Elastic Compute
                       Cloud (Amazon EC2) instances and VPCs in  your  mainte-
                       nance window.

                     o Automation   targets   only   :  Key=ResourceGroup,Val-
                       ues=MyResourceGroup

                     o State Manager association targets  only  :  Key=Instan-
                       ceIds,Values=*    This example demonstrates how to tar-
                       get all managed instances in the  Amazon  Web  Services
                       Region where the association was created.

                     For more information about how to send commands that tar-
                     get  managed  nodes  using  Key,Value   parameters,   see
                     Targeting  multiple  instances in the Amazon Web Services
                     Systems Manager User Guide .

                     Key -> (string)
                        User-defined criteria for sending commands that target
                        managed nodes that meet the criteria.

                     Values -> (list)
                        User-defined  criteria that maps to Key . For example,
                        if you specified tag:ServerRole ,  you  could  specify
                        value:WebServer  to  run  a  command on instances that
                        include EC2 tags of ServerRole,WebServer .

                        Depending on the type of target, the maximum number of
                        values  for a key might be lower than the global maxi-
                        mum of 50.

                        (string)

              ScheduleExpression -> (string)
                 A cron expression that specifies a schedule when the associa-
                 tion runs.

              OutputLocation -> (structure)
                 An  S3  bucket  where you want to store the output details of
                 the request.

                 S3Location -> (structure)
                     An S3 bucket where you want to store the results of  this
                     request.

                     OutputS3Region -> (string)
                        The Amazon Web Services Region of the S3 bucket.

                     OutputS3BucketName -> (string)
                        The name of the S3 bucket.

                     OutputS3KeyPrefix -> (string)
                        The S3 bucket subfolder.

              LastExecutionDate -> (timestamp)
                 The date on which the association was last run.

              LastSuccessfulExecutionDate -> (timestamp)
                 The  last date on which the association was successfully run.

              AssociationName -> (string)
                 The association name.

              MaxErrors -> (string)
                 The number of errors that are allowed before the system stops
                 sending  requests  to  run the association on additional tar-
                 gets. You can specify either an absolute  number  of  errors,
                 for  example 10, or a percentage of the target set, for exam-
                 ple 10%. If you specify 3,  for  example,  the  system  stops
                 sending  requests  when  the fourth error is received. If you
                 specify 0, then the system stops sending requests  after  the
                 first error is returned. If you run an association on 50 man-
                 aged nodes and set MaxError to 10%,  then  the  system  stops
                 sending the request when the sixth error is received.

                 Executions  that are already running an association when Max-
                 Errors is reached are allowed to complete, but some of  these
                 executions may fail as well. If you need to ensure that there
                 won't be more than max-errors failed executions, set  MaxCon-
                 currency to 1 so that executions proceed one at a time.

              MaxConcurrency -> (string)
                 The  maximum number of targets allowed to run the association
                 at the same time. You can specify a number, for  example  10,
                 or  a  percentage  of  the  target  set, for example 10%. The
                 default value is 100%, which means all targets run the  asso-
                 ciation at the same time.

                 If  a new managed node starts and attempts to run an associa-
                 tion while Systems Manager is running MaxConcurrency associa-
                 tions,  the  association  is  allowed to run. During the next
                 association interval, the new managed node will  process  its
                 association within the limit specified for MaxConcurrency .

              ComplianceSeverity -> (string)
                 The severity level that is assigned to the association.

              SyncCompliance -> (string)
                 The mode for generating association compliance. You can spec-
                 ify AUTO or MANUAL . In AUTO mode, the system uses the status
                 of the association execution to determine the compliance sta-
                 tus. If the association execution runs successfully, then the
                 association  is  COMPLIANT  .  If  the  association execution
                 doesn't run successfully, the association is NON-COMPLIANT  .

                 In  MANUAL  mode,  you  must  specify  the AssociationId as a
                 parameter for the  PutComplianceItems API operation. In  this
                 case, compliance data isn't managed by State Manager, a capa-
                 bility of Amazon Web Services Systems Manager. It is  managed
                 by your direct call to the  PutComplianceItems API operation.

                 By default, all associations use AUTO mode.

              ApplyOnlyAtCronInterval -> (boolean)
                 By default, when you create a new  associations,  the  system
                 runs it immediately after it is created and then according to
                 the schedule you specified. Specify this option if you  don't
                 want  an  association to run immediately after you create it.
                 This parameter isn't supported for rate expressions.

              CalendarNames -> (list)
                 The names or Amazon Resource Names (ARNs) of the Change  Cal-
                 endar  type  documents your associations are gated under. The
                 associations only run when that change calendar is open.  For
                 more  information,  see  Amazon  Web Services Systems Manager
                 Change Calendar .

                 (string)

              TargetLocations -> (list)
                 The combination of Amazon Web Services Regions and Amazon Web
                 Services accounts where you want to run the association.

                 (structure)
                     The combination of Amazon Web Services Regions and Amazon
                     Web Services accounts targeted by the current  Automation
                     execution.

                     Accounts -> (list)
                        The  Amazon Web Services accounts targeted by the cur-
                        rent Automation execution.

                        (string)

                     Regions -> (list)
                        The Amazon Web Services Regions targeted by  the  cur-
                        rent Automation execution.

                        (string)

                     TargetLocationMaxConcurrency -> (string)
                        The  maximum number of Amazon Web Services Regions and
                        Amazon Web Services accounts allowed to run the  Auto-
                        mation concurrently.

                     TargetLocationMaxErrors -> (string)
                        The maximum number of errors allowed before the system
                        stops queueing additional  Automation  executions  for
                        the currently running Automation.

                     ExecutionRoleName -> (string)
                        The  Automation  execution  role used by the currently
                        running Automation.  If  not  specified,  the  default
                        value  is AWS-SystemsManager-AutomationExecutionRole .

       Failed -> (list)
          Information about the associations that failed.

          (structure)
              Describes a failed association.

              Entry -> (structure)
                 The association.

                 Name -> (string)
                     The name of the SSM document that contains the configura-
                     tion  information  for  the managed node. You can specify
                     Command or Automation runbooks.

                     You can specify Amazon Web Services-predefined documents,
                     documents  you created, or a document that is shared with
                     you from another account.

                     For SSM documents that are shared  with  you  from  other
                     Amazon  Web  Services accounts, you must specify the com-
                     plete SSM document ARN, in the following format:

                        ``
                        arn:aws:ssm:region :account-id :document/document-name
                        ``

                     For example:
                        arn:aws:ssm:us-east-2:12345678912:docu-
                        ment/My-Shared-Document

                     For Amazon Web Services-predefined documents and SSM doc-
                     uments  you  created  in  your  account, you only need to
                     specify the document name. For  example,  AWS-ApplyPatch-
                     Baseline or My-Document .

                 InstanceId -> (string)
                     The managed node ID.

                     NOTE:
                        InstanceId  has  been deprecated. To specify a managed
                        node ID for an association, use the Targets parameter.
                        Requests  that  include  the parameter InstanceID with
                        Systems Manager documents  (SSM  documents)  that  use
                        schema version 2.0 or later will fail. In addition, if
                        you use the parameter InstanceId , you can't  use  the
                        parameters  AssociationName , DocumentVersion , MaxEr-
                        rors , MaxConcurrency , OutputLocation , or  Schedule-
                        Expression . To use these parameters, you must use the
                        Targets parameter.

                 Parameters -> (map)
                     A description of the parameters for a document.

                     key -> (string)

                     value -> (list)
                        (string)

                 AutomationTargetParameterName -> (string)
                     Specify the target for the association.  This  target  is
                     required  for associations that use an Automation runbook
                     and target resources by using rate  controls.  Automation
                     is a capability of Amazon Web Services Systems Manager.

                 DocumentVersion -> (string)
                     The document version.

                 Targets -> (list)
                     The managed nodes targeted by the request.

                     (structure)
                        An array of search criteria that targets managed nodes
                        using a key-value pair that you specify.

                        NOTE:
                            One or more targets must be specified for  mainte-
                            nance  window Run Command-type tasks. Depending on
                            the task, targets are optional for  other  mainte-
                            nance  window  task types (Automation, Lambda, and
                            Step Functions). For more information  about  run-
                            ning   tasks   that  don't  specify  targets,  see
                            Registering maintenance window tasks without  tar-
                            gets  in  the  Amazon Web Services Systems Manager
                            User Guide .

                        Supported formats include the following.

                        o Key=InstanceIds,Val-
                          ues=<instance-id-1>,<instance-id-2>,<instance-id-3>

                        o Key=tag:<my-tag-key>,Val-
                          ues=<my-tag-value-1>,<my-tag-value-2>

                        o Key=tag-key,Values=<my-tag-key-1>,<my-tag-key-2>

                        o Run Command and Maintenance window  targets  only  :
                          Key=resource-groups:Name,Val-
                          ues=<resource-group-name>

                        o Maintenance     window      targets      only      :
                          Key=resource-groups:ResourceTypeFilters,Val-
                          ues=<resource-type-1>,<resource-type-2>

                        o Automation  targets  only  :  Key=ResourceGroup;Val-
                          ues=<resource-group-name>

                        For example:

                        o Key=InstanceIds,Values=i-02573cafcfEXAM-
                          PLE,i-0471e04240EXAMPLE,i-07782c72faEXAMPLE

                        o Key=tag:CostCenter,Values=CostCenter1,CostCen-
                          ter2,CostCenter3

                        o Key=tag-key,Values=Name,Instance-Type,CostCenter

                        o Run  Command  and  Maintenance window targets only :
                          Key=resource-groups:Name,Values=ProductionResource-
                          Group    This example demonstrates how to target all
                          resources in the resource group  ProductionResource-
                          Group in your maintenance window.

                        o Maintenance      window      targets      only     :
                          Key=resource-groups:ResourceTypeFilters,Val-
                          ues=AWS::EC2::INSTANCE,AWS::EC2::VPC    This example
                          demonstrates how to target only Amazon Elastic  Com-
                          pute  Cloud  (Amazon EC2) instances and VPCs in your
                          maintenance window.

                        o Automation  targets  only  :  Key=ResourceGroup,Val-
                          ues=MyResourceGroup

                        o State Manager association targets only : Key=Instan-
                          ceIds,Values=*   This example  demonstrates  how  to
                          target  all managed instances in the Amazon Web Ser-
                          vices Region where the association was created.

                        For more information about how to send  commands  that
                        target  managed  nodes using Key,Value parameters, see
                        Targeting multiple instances in the  Amazon  Web  Ser-
                        vices Systems Manager User Guide .

                        Key -> (string)
                            User-defined  criteria  for  sending commands that
                            target managed nodes that meet the criteria.

                        Values -> (list)
                            User-defined criteria that maps to Key . For exam-
                            ple,  if  you specified tag:ServerRole , you could
                            specify  value:WebServer  to  run  a  command   on
                            instances that include EC2 tags of ServerRole,Web-
                            Server .

                            Depending on the type of target, the maximum  num-
                            ber  of  values  for a key might be lower than the
                            global maximum of 50.

                            (string)

                 ScheduleExpression -> (string)
                     A cron expression that  specifies  a  schedule  when  the
                     association runs.

                 OutputLocation -> (structure)
                     An  S3 bucket where you want to store the results of this
                     request.

                     S3Location -> (structure)
                        An S3 bucket where you want to store  the  results  of
                        this request.

                        OutputS3Region -> (string)
                            The Amazon Web Services Region of the S3 bucket.

                        OutputS3BucketName -> (string)
                            The name of the S3 bucket.

                        OutputS3KeyPrefix -> (string)
                            The S3 bucket subfolder.

                 AssociationName -> (string)
                     Specify a descriptive name for the association.

                 MaxErrors -> (string)
                     The  number  of errors that are allowed before the system
                     stops sending requests to run the  association  on  addi-
                     tional targets. You can specify either an absolute number
                     of errors, for example 10, or a percentage of the  target
                     set,  for example 10%. If you specify 3, for example, the
                     system stops sending requests when the  fourth  error  is
                     received. If you specify 0, then the system stops sending
                     requests after the first error is returned. If you run an
                     association  on 50 managed nodes and set MaxError to 10%,
                     then the system stops sending the request when the  sixth
                     error is received.

                     Executions  that  are already running an association when
                     MaxErrors is reached are allowed to complete, but some of
                     these  executions may fail as well. If you need to ensure
                     that there won't be more than  max-errors  failed  execu-
                     tions, set MaxConcurrency to 1 so that executions proceed
                     one at a time.

                 MaxConcurrency -> (string)
                     The maximum number of targets allowed to run the associa-
                     tion  at  the  same  time.  You can specify a number, for
                     example 10, or a percentage of the target set, for  exam-
                     ple  10%. The default value is 100%, which means all tar-
                     gets run the association at the same time.

                     If a new managed node starts and attempts to run an asso-
                     ciation  while  Systems Manager is running MaxConcurrency
                     associations, the association is allowed to  run.  During
                     the  next association interval, the new managed node will
                     process its association within the  limit  specified  for
                     MaxConcurrency .

                 ComplianceSeverity -> (string)
                     The severity level to assign to the association.

                 SyncCompliance -> (string)
                     The  mode  for generating association compliance. You can
                     specify AUTO or MANUAL . In AUTO mode,  the  system  uses
                     the  status of the association execution to determine the
                     compliance status. If the association execution runs suc-
                     cessfully,  then  the  association  is COMPLIANT . If the
                     association execution doesn't run successfully, the asso-
                     ciation is NON-COMPLIANT .

                     In  MANUAL  mode, you must specify the AssociationId as a
                     parameter for the  PutComplianceItems API  operation.  In
                     this  case,  compliance  data isn't managed by State Man-
                     ager, a capability of Amazon Web  Services  Systems  Man-
                     ager.  It  is managed by your direct call to the  PutCom-
                     plianceItems API operation.

                     By default, all associations use AUTO mode.

                 ApplyOnlyAtCronInterval -> (boolean)
                     By default, when you create a new associations, the  sys-
                     tem  runs  it  immediately  after  it is created and then
                     according to the schedule  you  specified.  Specify  this
                     option  if  you  don't want an association to run immedi-
                     ately after you create it. This parameter isn't supported
                     for rate expressions.

                 CalendarNames -> (list)
                     The  names  or Amazon Resource Names (ARNs) of the Change
                     Calendar  type  documents  your  associations  are  gated
                     under.  The associations only run when that Change Calen-
                     dar is open. For more information, see  Amazon  Web  Ser-
                     vices Systems Manager Change Calendar .

                     (string)

                 TargetLocations -> (list)
                     Use  this  action  to  create  an association in multiple
                     Regions and multiple accounts.

                     (structure)
                        The combination of Amazon  Web  Services  Regions  and
                        Amazon  Web  Services accounts targeted by the current
                        Automation execution.

                        Accounts -> (list)
                            The Amazon Web Services accounts targeted  by  the
                            current Automation execution.

                            (string)

                        Regions -> (list)
                            The  Amazon  Web  Services Regions targeted by the
                            current Automation execution.

                            (string)

                        TargetLocationMaxConcurrency -> (string)
                            The maximum number of Amazon Web Services  Regions
                            and  Amazon  Web  Services accounts allowed to run
                            the Automation concurrently.

                        TargetLocationMaxErrors -> (string)
                            The maximum number of errors  allowed  before  the
                            system stops queueing additional Automation execu-
                            tions for the currently running Automation.

                        ExecutionRoleName -> (string)
                            The Automation execution role  used  by  the  cur-
                            rently  running  Automation. If not specified, the
                            default value is AWS-SystemsManager-AutomationExe-
                            cutionRole .

              Message -> (string)
                 A description of the failure.

              Fault -> (string)
                 The source of the failure.



                                                    CREATE-ASSOCIATION-BATCH()
